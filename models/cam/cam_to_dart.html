<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<HTML>
<HEAD>
<TITLE>program cam_to_dart</TITLE>
<link rel="stylesheet" type="text/css" href="../../doc/html/doc.css" />
</HEAD>
<BODY>
<A NAME="TOP"></A>

<H1>PROGRAM <em class=program>cam_to_dart</em></H1>

<table border=0 summary="" cellpadding=5>
<tr>
    <td valign=middle>
    <img src="../../doc/html/Dartboard9.png" alt="DART project logo" height=70 />
    </td>
    <td>
       <P>Jump to <a href="../../index.html">DART Documentation Main Index</a><br />
          <small><small>version information for this file: <br />
          <!-- version tag follows, do not edit -->
          $Id$</small></small>
       </P></td>
</tr>
</table>

<A HREF="#Namelist">NAMELIST</A> /
<A HREF="#Modules">MODULES</A> /
<A HREF="#FilesUsed">FILES</A> /
<A HREF="#References">REFERENCES</A> /
<A HREF="#Errors">ERRORS</A> /
<A HREF="#FuturePlans">PLANS</A> /
<A HREF="#Legalese">TERMS OF USE</A>

<H2>Overview</H2>

<P>
   <em class=program>cam_to_dart</em> is the program that reads a CAM
   restart file (usually <em class=file>caminput.nc</em>) and creates
   a single DART output/restart file 
   (e.g. <em class=file>perfect_ics, filter_ics, ... </em>). If you have
   multiple input files, you will need to rename the output files as you create them.
   <br />
   <br />
   The list of variables extracted from the CAM netCDF  
   file and conveyed to DART is controlled by the set of <em class=file>input.nml</em>
   <em class=code>&amp;model_nml:state_names_*</em> variables. The <em class=code>date</em> and
   <em class=code>datesec</em> variables in the CAM netcdf file are used to specify
   the valid time of the state vector. The time may be changed with the 
   <a href="../../utilities/restart_file_tool.html">restart_file_tool</a> if desired.
   <br />
   <br />
   Some CAM restart files are from climatological runs and have a valid time that
   predates the use of the Gregorian calendar. In such instances, the year component
   of the original date is changed to be a valid Gregorian year (by adding 1601).
   A warning is issued to the screen and to the logfile. Please use the
   <a href="../../utilities/restart_file_tool.html">restart_file_tool</a> to change
   this time.  
   <br />
   <br />
   Conditions required for successful execution of <em class=program>cam_to_dart</em>:
</P>

<UL>
   <LI>a valid <em class=file>input.nml</em> namelist file for DART</LI>
   <LI>a CAM 'phis' netCDF file [default: <em class=file>cam_phis.nc</em>]</LI>
   <LI>a CAM restart file [default: <em class=file>caminput.nc</em>].</LI>
</UL>

<P>
Since this program is called repeatedly for every ensemble member,
we have found it convenient to link the CAM restart files
to the default input filename (<em class=file>caminput.nc</em>).
The default DART output filename is <em class=file>dart_ics</em> -
this may be moved or linked as necessary.
</P>

<!--==================================================================-->
<!--=================== DESCRIPTION OF A NAMELIST ====================-->
<!--==================================================================-->

<A NAME="Namelist"></A>
<hr />
<H2>NAMELIST</H2>
<P>We adhere to the F90 standard of starting a namelist with an ampersand
'&amp;' and terminating with a slash '/' for all our namelist input.
Character strings that contain a '/' must be
enclosed in quotes to prevent them from prematurely terminating the namelist.
The namelist declaration is:
</P>
<div class=namelist>
<pre>
<em class=call>namelist / cam_to_dart_nml / </em> cam_to_dart_input_file, &amp;
                                       cam_to_dart_output_file
</pre>
</div>

<div class=indent1>
<!-- Description -->

<P>
This namelist is always read from a file called <em class=file>input.nml</em>.
</P>

<TABLE border=0 cellpadding=3 width=100%>
<TR><TH align=left>Contents    </TH>
    <TH align=left>Type        </TH>
    <TH align=left>Description </TH></TR>

<TR><!--contents--><TD valign=top>cam_to_dart_input_file&nbsp;&nbsp;&nbsp;</TD>
    <!--  type  --><TD valign=top>character(len=128)&nbsp;&nbsp;&nbsp;</TD>
    <!--descript--><TD>The name of the DART file containing the CAM state. 
                       <em class=units>[default: 'caminput.nc']</em></TD></TR>

<TR><!--contents--><TD valign=top>cam_to_dart_output_file&nbsp;&nbsp;&nbsp;</TD>
    <!--  type  --><TD valign=top>character(len=128)&nbsp;&nbsp;&nbsp;</TD>
    <!--descript--><TD>The name of the DART file containing the model state
                       derived from the CAM restart file.
                       <em class=units>[default: 'dart_ics']</em></TD></TR>

</TABLE>

</div>
<br />

<!--==================================================================-->

<A NAME="Modules"></A>
<hr />
<H2>MODULES USED</H2>
<PRE>
assim_model_mod.f90
types_mod.f90
threed_sphere/location_mod.f90
model_mod.f90
null_mpi_utilities_mod.f90
obs_kind_mod.f90
random_nr_mod.f90
random_seq_mod.f90
time_manager_mod.f90
utilities_mod.f90
</PRE>

<!--==================================================================-->
<!-- Describe the Files Used by this module.                          -->
<!--==================================================================-->

<A NAME="FilesUsed"></A>
<hr />
<H2>FILES Read</H2>
<UL>
    <LI>DART namelist file; <em class=file>input.nml</em></LI>
    <LI>CAM restart file; <em class=file>caminput.nc</em></LI>
    <LI>CAM "phis" file specified in <em class=code>&amp;model_nml::cam_phis</em> 
        (normally <em class=file>cam_phis.nc</em>)</LI>
</UL>

<H2>FILES Written</H2>
<UL><LI>DART initial conditions/restart file; e.g. <em class=file>dart_ics</em></LI>
</UL>

<!--==================================================================-->
<!-- Cite references, if need be.                                     -->
<!--==================================================================-->

<A NAME="References"></A>
<hr />
<H2>REFERENCES</H2>
<P>
none
</P>

<!--==================================================================-->
<!-- Describe all the error conditions and codes.                     -->
<!--==================================================================-->

<A NAME="Errors"></A>
<hr />
<H2>ERROR CODES and CONDITIONS</H2>
<P>
none - all error messages come from modules that have their own documentation.
</P>

<H2>KNOWN BUGS</H2>
<P>
none
</P>

<!--==================================================================-->
<!-- Describe Future Plans.                                           -->
<!--==================================================================-->

<A NAME="FuturePlans"></A>
<hr />
<H2>FUTURE PLANS</H2>
<P>
None.
</P>

<!--==================================================================-->
<!-- Legalese & Metadata                                              -->
<!--==================================================================-->

<A NAME="Legalese"></A>
<hr />
<H2>Terms of Use</H2>

<P>
DART software - Copyright 2004 - 2011 UCAR.<br />
This open source software is provided by UCAR, "as is",<br />
without charge, subject to all terms of use at<br />
<a href="http://www.image.ucar.edu/DAReS/DART/DART_download">
http://www.image.ucar.edu/DAReS/DART/DART_download</a>
</P>

<TABLE border=0 cellpadding=0 width=100% summary="">
<TR><TD valign=top>Contact:       </TD><TD> DART core group   </TD></TR>
<TR><TD valign=top>Revision:      </TD><TD> $Revision$ </TD></TR>
<TR><TD valign=top>Source:        </TD><TD> $URL$ </TD></TR>
<TR><TD valign=top>Change Date:   </TD><TD> $Date$ </TD></TR>
<TR><TD valign=top>Change&nbsp;history:&nbsp;</TD><TD> try "svn&nbsp;log" or "svn&nbsp;diff" </TD></TR>
</TABLE>

<!--==================================================================-->

</BODY>
</HTML>
