<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
          "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<HEAD>
<TITLE>module DEFAULT_obs_kind_mod</TITLE>
<link rel="stylesheet" type="text/css" href="../../../docs/html/doc.css" />
<link href="../../../docs/images/dart.ico" rel="shortcut icon" />
</HEAD>
<BODY>
<A NAME="TOP"></A>

<H1>MODULE DEFAULT_obs_kind_mod</H1>

<table border=0 summary="" cellpadding=5>
<tr>
    <td valign=middle>
    <img src="../../../docs/images/Dartboard7.png" alt="DART project logo" height=70 />
    </td>
    <td>Jump to <a href="../../../docs/index.html">DART Documentation Main Index</a></td>
</tr>
</table>

<A HREF="#Legalese">TERMS OF USE</A>

<H2>Overview</H2>

<P>
The observation types supported by DART are defined at the
time the programs are compiled.  Only those observation types
of interest need to be included.
This is the input template file which is read by the program
<em class="unix">preprocess</em>
to create the 
<em class="file">obs_kind_mod.f90</em> (documented separately in this
directory).  Information from zero or more special obs_def modules (such as
<em class="file">obs_def_1d_state_mod.f90</em> or 
<em class="file">obs_def_reanalysis_bufr_mod.f90</em>,
documented in the obs_def directory) are incorporated into the template
provided by DEFAULT_obs_def_kind. If no special obs_def files are included in
the preprocessor namelist, a minimal 
<em class="file">obs_kind_mod.f90</em> is created which can
only support identity forward observation operators.
<br>
<br> 
To add a new specific observation type, see the
<a href="../../../observations/forward_operators/obs_def_mod.html">obs_def_mod</a> documentation.
If adding this type includes defining a new generic observation quantity,
then the quantity must be added to the table in this file, with a unique
integer value defined for it.  The new value(s) must also be added to the
string-to-number section in the <em class=code>initialize_module()</em> routine below.
In a planned future update to the preprocess program it is expected that
this quantities table will become autogenerated, much like the types table
described below, so no editing of this file will be needed.  But until then,
quantities must be added by here, by hand. And note that they must be added
to the template file, <em class="file">DEFAULT_obs_kind_mod.F90</em> and
not the output of the preprocess program, 
<em class="file">obs_kind_mod.f90</em>.  The latter file is overwritten
each time preprocess runs, deleting any hand editing done on that file.
<br>
<br> 
The rest of this documentation 
describes the special formatting that is included
in the DEFAULT_obs_kind_mod in order to guide the preprocess program. Two
sections of code are inserted into the DEFAULT_obs_def_kind module from each of
the special obs_def modules that are requested. The insertion point for each
section is denoted by a special comment line that must be included VERBATIM
in DEFAULT_obs_kind_mod. These special comment lines and their significance are:
</P>
<OL>
<li><pre>
! DART PREPROCESS INTEGER DECLARATION INSERTED HERE
</pre>
Each of the observation type identifiers are inserted here, and are given
both the <em class="unix">parameter</em> and <em class="unix">public</em>
attributes. 
The associated integer values are generated sequentially, starting at 1.
If a different set of special obs_def modules is specified via the
namelist for preprocess, the integer value associated with a given observation
type could change so these integers are for use internal to a given program
execution only. Observation types are permanently and uniquely identified by
a string with character values identical to the integer identifier here. In
other words, an observation quantity with integer parameter identifier 
RAW_STATE_VARIABLE will always be associated with a string 
"RAW_STATE_VARIABLE" (see below).
</li>

<li><pre>
! DART PREPROCESS OBS_QTY_INFO INSERTED HERE
</pre>
The entries for the obs_kind_info table are initialized here. This table has a
row for each observation quantity defined in the public and integer parameter
declarations discussed above. For each obs_kind, the obs_kind info table
contains the following information:
<ol>
<li>The integer index associated with this
observation quantity. This is the value that is defined in the integer parameter
statement above. 
</li>
<li>A character string with maximum length 32 characters
that uniquely identifies the observation quantity. This string is identical to the
F90 identifier used in the integer parameter statements created above.
</li>
<li>A generic variable quantity referenced by an integer. The
obs_kind_mod contains a table that defines an integer parameter that uniquely
identifies each generic observation quantity. Generic quantities can be associated with
both a model state variable or an observation quantity. For instance, the generic
quantity QTY_U_WIND_COMPONENT might be associated with model U state variables, with
RADIOSONDE_U_WIND_COMPONENT observation types, and with ACARS_U_WIND_COMPONENT
observation types. The distinction between generic quantites and observation types
is important and potentially confusing, so be careful to understand this point. 
</li>
<li>A logical variable indicating whether observations of this type are
to be assimilated in the current experiment. This variable is set from the
obs_kind namelist (see obs_kind_mod.html in this directory).  
The default value here is false when the obs_def_mod is
created by the preprocess program.
</li>
<li>A logical
variable indicating whether observations of this type are to be evaluated
(forward operator computed and recorded) but not assimilated (again set by
namelist).
The default value here is false when the obs_def_mod is
created by the preprocess program.
</li>
<li>A logical
variable indicating whether observations of this type should use
precomputed forward operator values in the observation sequence file.
The default value here is false when the obs_def_mod is
created by the preprocess program.
</li>
</ol>
</li>

</ol>

<!--==================================================================-->
<!-- Legalese & Metadata                                              -->
<!--==================================================================-->

<A NAME="Legalese"></A>
<div class="top">[<a href="#">top</a>]</div><hr />
<H2>Terms of Use</H2>

<P>
DART software - Copyright UCAR. This open source software is provided
by UCAR, "as is", without charge, subject to all terms of use at
<a href="http://www.image.ucar.edu/DAReS/DART/DART_download">
http://www.image.ucar.edu/DAReS/DART/DART_download</a>
</P>

<!--==================================================================-->

</BODY>
</HTML>
