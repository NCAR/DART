<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Apple macOS version 5.6.0">
<title>module time_manager_mod</title>
<link rel="stylesheet" type="text/css" href=
"../../../docs/html/doc.css">
<link href="../../../docs/images/dart.ico" rel="shortcut icon">
</head>
<body>
<a name="TOP" id="TOP"></a>
<h1>MODULE time_manager_mod</h1>
<table border="0" summary="" cellpadding="5">
<tr>
<td valign="middle"><img src="../../../docs/images/Dartboard7.png"
alt="DART project logo" height="70"></td>
<td>Jump to <a href="../../../docs/index.html">DART Documentation
Main Index</a></td>
</tr>
</table>
<a href="#Interface">INTERFACES</a> / <a href=
"#Namelist">NAMELIST</a> / <a href="#FilesUsed">FILES</a> /
<a href="#References">REFERENCES</a> / <a href="#Errors">ERRORS</a>
/ <a href="#FuturePlans">PLANS</a> / <a href=
"#PrivateComponents">PRIVATE COMPONENTS</a> / <a href=
"#Legalese">TERMS OF USE</a>
<h2>Overview</h2>
<p>Provides a set of routines to manipulate both time and calendars
of various types.<br>
<br>
Time intervals are stored and defined in terms of integer number of
days and integer seconds. The minimum time resolution is 1 second.
Mathematical operations (e.g. addition, subtraction,
multiplication) are defined on these intervals. Seconds which roll
over 86400 (the number of seconds in a day) are converted into
days.<br>
<br>
Calendars interpret time intervals in terms of years, months, days.
Various calendars commonly in use in the scientific community are
supported.</p>
<!--==================================================================-->
<a name="OtherModulesUsed" id="OtherModulesUsed"></a>
<div class="top">[<a href="#">top</a>]</div>
<hr>
<h2>OTHER MODULES USED</h2>
<pre>
types_mod
utilities_mod
</pre>
<!--==================================================================-->
<!-- Declare all public entities ...                                  -->
<!-- duplicate public routines template as many times as necessary    -->
<!-- make sure you replace all yyyroutine?? strings                   -->
<!--==================================================================-->
<!--Note to authors. The first row of the table is different.         -->
<!--==================================================================-->
<a name="Interface" id="Interface"></a>
<div class="top">[<a href="#">top</a>]</div>
<hr>
<h2>PUBLIC INTERFACES</h2>
<table>
<tr>
<td><em class="call">use time_manager_mod, only :</em></td>
<td><a href="#time_type">time_type</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(+)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(-)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(*)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(/)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(&gt;)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(&gt;=)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(==)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(/=)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(&lt;)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(&lt;=)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#op_type">operator(//)</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#set_time">set_time</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#set_time_missing">set_time_missing</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#increment_time">increment_time</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#decrement_time">decrement_time</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#get_time">get_time</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#interval_alarm">interval_alarm</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#repeat_alarm">repeat_alarm</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#cal_type">THIRTY_DAY_MONTHS</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#cal_type">JULIAN</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#cal_type">GREGORIAN</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#cal_type">NOLEAP</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#cal_type">NO_CALENDAR</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#cal_type">GREGORIAN_MARS</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#set_calendar_type">set_calendar_type</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#get_calendar_type">get_calendar_type</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#get_calendar_string">get_calendar_string</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#set_date">set_date</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#get_date">get_date</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#increment_date">increment_date</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#decrement_date">decrement_date</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#days_in_month">days_in_month</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#leap_year">leap_year</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#length_of_year">length_of_year</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#days_in_year">days_in_year</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#month_name">month_name</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#julian_day">julian_day</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#time_manager_init">time_manager_init</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#print_time">print_time</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#print_date">print_date</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#write_time">write_time</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#read_time">read_time</a></td>
</tr>
<tr>
<td> </td>
<td><a href="#interactive_time">interactive_time</a></td>
</tr>
</table>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="set_time" id="set_time"></a><br>
<div class="routine"><em class="call">var = set_time(seconds
<em class="optionalcode">[, days]</em>)</em>
<pre>
type(time_type)               :: <em class="code">set_time</em>
integer,           intent(in) :: <em class="code">seconds</em>
integer, optional, intent(in) :: <em class="optionalcode">days</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Fills a time type. If seconds are &gt; 86400, they are converted
into the appropriate number of days. Note that seconds are
specified first.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">seconds</em></td>
<td>Number of seconds. If larger than 86400, they are converted
into the appropriate number of days.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">days</em></td>
<td>Number of days. Default is 0.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="set_time_missing" id="set_time_missing"></a><br>
<div class="routine"><em class="call">var = set_time_missing()</em>
<pre>
type(time_type)                        :: <em class=
"code">set_time_missing</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Set a time type to a missing value. The resulting time value
will cause an error if used for an arithmetic operation or if
get_time() is called.</p>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="increment_time" id="increment_time"></a><br>
<div class="routine"><em class="call">var = increment_time(time,
seconds <em class="optionalcode">[, days]</em>)</em>
<pre>
type(time_type)               :: <em class=
"code">increment_time</em>
type(time_type),   intent(in) :: <em class="code">time</em>
integer,           intent(in) :: <em class="code">seconds</em>
integer, optional, intent(in) :: <em class="optionalcode">days</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Adds the specified number of seconds and optionally, days, to
the given time and returns the new time. Increments cannot be
negative (see decrement_time below).</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>time value to be incremented.</td>
</tr>
<tr>
<td valign="top"><em class="code">seconds</em></td>
<td>number of seconds to add to given time.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">days</em></td>
<td>optionally a number of days to add to the given time.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="decrement_time" id="decrement_time"></a><br>
<div class="routine"><em class="call">var = decrement_time(time,
seconds <em class="optionalcode">[, days]</em>)</em>
<pre>
type(time_type)                        :: <em class=
"code">decrement_time</em>
type(time_type), intent(in)            :: <em class=
"code">time</em>
integer,         intent(in)            :: <em class=
"code">seconds</em>
integer,         intent(in), optional  :: <em class=
"optionalcode">days</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Subtract the specified number of seconds and optionally, days,
to the given time and returns the new time. Decrements cannot be
negative (see increment_time above).</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>time value to be decremented.</td>
</tr>
<tr>
<td valign="top"><em class="code">seconds</em></td>
<td>number of seconds to subtract from the given time.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">days</em></td>
<td>optionally a number of days to subtract from the given
time.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="interval_alarm" id="interval_alarm"></a><br>
<div class="routine"><em class="call">var = interval_alarm(time,
time_interval, alarm, alarm_interval)</em>
<pre>
logical                        :: <em class=
"code">interval_alarm</em>
type(time_type), intent(in)    :: <em class="code">time</em>
type(time_type), intent(in)    :: <em class=
"code">time_interval</em>
type(time_type), intent(inout) :: <em class="code">alarm</em>
type(time_type), intent(in)    :: <em class=
"code">alarm_interval</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Supports a commonly used type of test on times for models. Given
the current time, and a time for an alarm, determines if this is
the closest time to the alarm time given a time step of
time_interval. If this is the closest time (alarm - time &lt;=
time_interval/2), the function returns true and the alarm is
incremented by the alarm_interval. Watch for problems if the new
alarm time is less than time + time_interval.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Current time.</td>
</tr>
<tr>
<td valign="top"><em class="code">time_interval</em></td>
<td>Bin size for determining if alarm time is close enough to
now.</td>
</tr>
<tr>
<td valign="top"><em class="code">alarm</em></td>
<td>When alarm next goes off next. Updated by this routine.</td>
</tr>
<tr>
<td valign="top"><em class="code">alarm_interval</em></td>
<td>How often alarm goes off.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="repeat_alarm" id="repeat_alarm"></a><br>
<div class="routine"><em class="call">var = repeat_alarm(time,
alarm_frequency, alarm_length)</em>
<pre>
type(time_type)                :: <em class=
"code">repeat_alarm</em>
type(time_type), intent(in)    :: <em class="code">time</em>
type(time_type), intent(in)    :: <em class=
"code">alarm_frequency</em>
type(time_type), intent(in)    :: <em class=
"code">alarm_length</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Repeat_alarm supports an alarm that goes off with
alarm_frequency and lasts for alarm_length. If the nearest
occurence of an alarm time is less than half an alarm_length from
the input time, repeat_alarm is true. For instance, if the
alarm_frequency is 1 day, and the alarm_length is 2 hours, then
repeat_alarm is true from time 2300 on day n to time 0100 on day n
+ 1 for all n.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Current time.</td>
</tr>
<tr>
<td valign="top"><em class="code">alarm_frequency</em></td>
<td>How often the alarm goes off.</td>
</tr>
<tr>
<td valign="top"><em class="code">alarm_length</em></td>
<td>How long the alarm is true.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="get_calendar_type" id="get_calendar_type"></a><br>
<div class="routine"><em class="call">var =
get_calendar_type()</em>
<pre>
integer :: <em class="code">get_calendar_type</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Returns default calendar type for mapping from time to date.
Calendar types are public integer parameters that define various
calendars. See elsewhere in this file for the list.</p>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="set_date" id="set_date"></a><br>
<div class="routine"><em class="call">var = set_date(year, month,
day <em class="optionalcode">[, hours, minutes, seconds]</em>)</em>
<pre>
type(time_type)                :: <em class="code">set_date</em>
integer, intent(in)            :: <em class="code">year</em>
integer, intent(in)            :: <em class="code">month</em>
integer, intent(in)            :: <em class="code">day</em>
integer, intent(in), optional  :: <em class=
"optionalcode">hours</em>
integer, intent(in), optional  :: <em class=
"optionalcode">minutes</em>
integer, intent(in), optional  :: <em class=
"optionalcode">seconds</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Given a date interpreted using the current calendar type,
compute the corresponding time.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">year</em></td>
<td>Integer year.</td>
</tr>
<tr>
<td valign="top"><em class="code">month</em></td>
<td>Integer month number.</td>
</tr>
<tr>
<td valign="top"><em class="code">day</em></td>
<td>Integer day number.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">hours</em></td>
<td>Integer hour. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">minutes</em></td>
<td>Integer minutes. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">seconds</em></td>
<td>Integer seconds. Default is 0.</td>
</tr>
</table>
</div>
<br>
<!--===================== DESCRIPTION OF A ROUTINE =====================-->
<a name="increment_date" id="increment_date"></a><br>
<div class="routine"><em class="call">var = increment_date(time
<em class="optionalcode">[, years, months, days, hours, minutes,
seconds]</em>)</em>
<pre>
type(time_type)                :: <em class=
"code">increment_date</em>
type(time_type), intent(in)    :: <em class="code">time</em>
integer, intent(in), optional  :: <em class=
"optionalcode">years</em>
integer, intent(in), optional  :: <em class=
"optionalcode">months</em>
integer, intent(in), optional  :: <em class=
"optionalcode">days</em>
integer, intent(in), optional  :: <em class=
"optionalcode">hours</em>
integer, intent(in), optional  :: <em class=
"optionalcode">minutes</em>
integer, intent(in), optional  :: <em class=
"optionalcode">seconds</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Given a time and some date increment, compute a new time. The
interpretation of the date depends on the currently selected
calendar type.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Current time.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">year</em></td>
<td>Integer years to add. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">month</em></td>
<td>Integer months to add. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">day</em></td>
<td>Integer days to add. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">hours</em></td>
<td>Integer hours to add. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">minutes</em></td>
<td>Integer minutes to add. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">seconds</em></td>
<td>Integer seconds to add. Default is 0.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="decrement_date" id="decrement_date"></a><br>
<div class="routine"><em class="call">var = decrement_date(time
<em class="optionalcode">[, years, months, days, hours, minutes,
seconds]</em>)</em>
<pre>
type(time_type)                :: <em class=
"code">decrement_date</em>
type(time_type), intent(in)    :: <em class="code">time</em>
integer, intent(in), optional  :: <em class=
"optionalcode">years</em>
integer, intent(in), optional  :: <em class=
"optionalcode">months</em>
integer, intent(in), optional  :: <em class=
"optionalcode">days</em>
integer, intent(in), optional  :: <em class=
"optionalcode">hours</em>
integer, intent(in), optional  :: <em class=
"optionalcode">minutes</em>
integer, intent(in), optional  :: <em class=
"optionalcode">seconds</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Given a time and some date decrement, compute a new time. The
interpretation of the date depends on the currently selected
calendar type.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Current time.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">year</em></td>
<td>Integer years to subtract. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">month</em></td>
<td>Integer months to subtract. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">day</em></td>
<td>Integer days to subtract. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">hours</em></td>
<td>Integer hours to subtract. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">minutes</em></td>
<td>Integer minutes to subtract. Default is 0.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">seconds</em></td>
<td>Integer seconds to subtract. Default is 0.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="days_in_month" id="days_in_month"></a><br>
<div class="routine"><em class="call">var =
days_in_month(time)</em>
<pre>
integer                        :: <em class=
"code">days_in_month</em>
type(time_type), intent(in)    :: <em class="code">time</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Given a time, determine the month based on the currently
selected calendar type and return the numbers of days in that
month.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Current time.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="leap_year" id="leap_year"></a><br>
<div class="routine"><em class="call">var = leap_year(time)</em>
<pre>
logical                        :: <em class="code">leap_year</em>
type(time_type),intent(in)     :: <em class="code">time</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Given a time, determine if the current year is a leap year in
the currently selected calendar type.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Current time.</td>
</tr>
</table>
</div>
<br>
<!--===================== DESCRIPTION OF A ROUTINE =====================-->
<a name="length_of_year" id="length_of_year"></a><br>
<div class="routine"><em class="call">var = length_of_year()</em>
<pre>
integer                      :: <em class=
"code">length_of_year</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>For the currently selected calendar type, return the number of
days in a year if that value is fixed (e.g. there are not leap
years). For other calendar types, see <a href=
"#days_in_year">days_in_year()</a> which takes a time argument to
determine the current year.</p>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="days_in_year" id="days_in_year"></a><br>
<div class="routine"><em class="call">var = days_in_year(time)</em>
<pre>
integer                        :: <em class=
"code">days_in_year</em>
type(time_type), intent(in)    :: <em class="code">time</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Given a time, determine the year based on the currently selected
calendar type and return the numbers of days in that year.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Current time.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="month_name" id="month_name"></a><br>
<div class="routine"><em class="call">var = month_name(n)</em>
<pre>
character(len=9)               :: <em class="code">month_name</em>
integer,         intent(in)    :: <em class="code">n</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Return a character string containing the month name
corresponding to the given month number.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">n</em></td>
<td>Month number. Must be between 1 and 12, inclusive.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="julian_day" id="julian_day"></a><br>
<div class="routine"><em class="call">var = julian_day(year, month,
day)</em>
<pre>
integer                        :: <em class="code">julian_day</em>
integer,        intent(in)     :: <em class="code">year</em>
integer,        intent(in)     :: <em class="code">month</em>
integer,        intent(in)     :: <em class="code">day</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Given a date in year/month/day format, compute the day number
from the beginning of the year. The currently selected calendar
type must be GREGORIAN.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">year</em></td>
<td>Year number in the Gregorian calendar.</td>
</tr>
<tr>
<td valign="top"><em class="code">month</em></td>
<td>Month number in the Gregorian calendar.</td>
</tr>
<tr>
<td valign="top"><em class="code">day</em></td>
<td>Day of month in the Gregorian calendar.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A FUNCTION ========================-->
<a name="read_time" id="read_time"></a><br>
<div class="routine"><em class="call">var = read_time(file_unit
<em class="optionalcode">[, form, ios_out]</em>)</em>
<pre>
type(time_type)                         :: <em class=
"code">read_time</em>
integer,          intent(in)            :: <em class=
"code">file_unit</em>
character(len=*), intent(in),  optional :: <em class=
"optionalcode">form</em>
integer,          intent(out), optional :: <em class=
"optionalcode">ios_out</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Read a time from the given file unit number. The unit must
already be open. The default format is ascii/formatted. If an error
is encountered and ios_out is specified, the error status will be
returned to the caller; otherwise the error is fatal.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">file_unit</em></td>
<td>Integer file unit number of an already open file.</td>
</tr>
<tr>
<td valign="top"><em class="code">form</em></td>
<td>Format to read the time. Options are 'formatted' or
'unformatted'. Default is 'formatted'.</td>
</tr>
<tr>
<td valign="top"><em class="code">ios_out</em></td>
<td>On error, if specified, the error status code is returned here.
If not specified, an error calls the standard error_handler and
exits.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A SUBROUTINE =======================-->
<a name="get_time" id="get_time"></a><br>
<div class="routine"><em class="call">call get_time(time, seconds
<em class="optionalcode">[, days]</em>)</em>
<pre>
type(time_type), intent(in)             :: <em class=
"code">time</em>
integer,         intent(out)            :: <em class=
"code">seconds</em>
integer,         intent(out), optional  :: <em class=
"optionalcode">days</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Returns days and seconds ( &lt; 86400 ) corresponding to a time.
If the optional 'days' argument is not given, the days are
converted to seconds and the total time is returned as seconds.
Note that seconds preceeds days in the argument list.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Time to convert into seconds and days.</td>
</tr>
<tr>
<td valign="top"><em class="code">seconds</em></td>
<td>If days is specified, number of seconds in the current day.
Otherwise, total number of seconds in time.</td>
</tr>
<tr>
<td valign="top"><em class="code">days</em></td>
<td>If specified, number of days in time.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A SUBROUTINE =======================-->
<a name="set_calendar_type" id="set_calendar_type"></a><br>
<div class="routine"><em class="call">call
set_calendar_type(mytype)</em> or <em class="call">call
set_calendar_type(calstring)</em>
<pre>
integer, intent(in)               :: <em class="code">mytype</em>
 or
character(len=*), intent(in)      :: <em class=
"code">calstring</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Selects the current calendar type, for converting between time
and year/month/day. The argument can either be one of the
predefined calendar integer parameter types (see elsewhere in this
file for the list of types), or a string which matches the name of
the integer parameters. The string interface is especially suitable
for namelist use.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">mytype</em></td>
<td>Integer parameter to select the calendar type.</td>
</tr>
</table>
or
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">calstring</em></td>
<td>Character string to select the calendar type. Valid strings
match the names of the integer parameters.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A SUBROUTINE =======================-->
<a name="get_calendar_string" id="get_calendar_string"></a><br>
<div class="routine"><em class="call">call
get_calendar_string(mystring)</em>
<pre>
character(len=*), intent(out)     :: <em class="code">mystring</em>
</pre></div>
<!-- for consistency, the arg name should be calstring, i think. -->
<div class="indent1"><!-- Description -->
<p>Return the character string corresponding to the currently
selected calendar type.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">mystring</em></td>
<td>Character string corresponding to the current calendar
type.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A SUBROUTINE =======================-->
<a name="get_date" id="get_date"></a><br>
<div class="routine"><em class="call">call get_date(time, year,
month, day, hour, minute, second)</em>
<pre>
type(time_type), intent(in)       :: <em class="code">time</em>
integer, intent(out)              :: <em class="code">year</em>
integer, intent(out)              :: <em class="code">month</em>
integer, intent(out)              :: <em class="code">day</em>
integer, intent(out)              :: <em class="code">hour</em>
integer, intent(out)              :: <em class="code">minute</em>
integer, intent(out)              :: <em class="code">second</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Given a time, compute the corresponding date given the currently
selected calendar type.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Input time.</td>
</tr>
<tr>
<td valign="top"><em class="code">year</em></td>
<td>Corresponding calendar year.</td>
</tr>
<tr>
<td valign="top"><em class="code">month</em></td>
<td>Corresponding calendar month.</td>
</tr>
<tr>
<td valign="top"><em class="code">day</em></td>
<td>Corresponding calendar day.</td>
</tr>
<tr>
<td valign="top"><em class="code">hour</em></td>
<td>Corresponding hour.</td>
</tr>
<tr>
<td valign="top"><em class="code">minute</em></td>
<td>Corresponding minute.</td>
</tr>
<tr>
<td valign="top"><em class="code">second</em></td>
<td>Corresponding second.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A SUBROUTINE =======================-->
<a name="time_manager_init" id="time_manager_init"></a><br>
<div class="routine"><em class="call">call
time_manager_init()</em></div>
<div class="indent1"><!-- Description -->
<p>Initializes any internal data needed by the time manager code.
Does not need to be called before using any of the time manager
routines; it will be called internally before executing any of the
other routines.</p>
</div>
<br>
<!--============= DESCRIPTION OF A SUBROUTINE =======================-->
<a name="print_time" id="print_time"></a><br>
<div class="routine"><em class="call">call print_time(time
<em class="optionalcode">[, str, iunit]</em>)</em>
<pre>
type(time_type),  intent(in)           :: <em class=
"code">time</em>
character(len=*), intent(in), optional :: <em class=
"optionalcode">str</em>
integer,          intent(in), optional :: <em class=
"optionalcode">iunit</em>
 
</pre></div>
<div class="indent1"><!-- Description -->
<p>Print the time as days and seconds. If the optional str argument
is specified, print that string as a label. If iunit is specified,
write output to that unit; otherwise write to standard
output/terminal.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Time to be printed as days/seconds.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">str</em></td>
<td>String label to print before days/seconds. Default: 'TIME:
'.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">iunit</em></td>
<td>Unit number to write output on. Default is standard
output/terminal (unit 6).</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A SUBROUTINE =======================-->
<a name="print_date" id="print_date"></a><br>
<div class="routine"><em class="call">call print_date(time
<em class="optionalcode">[, str, iunit]</em>)</em>
<pre>
type(time_type),  intent(in)           :: <em class=
"code">time</em>
character(len=*), intent(in), optional :: <em class=
"optionalcode">str</em>
integer,          intent(in), optional :: <em class=
"optionalcode">iunit</em>
 
</pre></div>
<div class="indent1"><!-- Description -->
<p>Print the time as year/month/day/hour/minute/second, as computed
from the currently selected calendar type. If the optional str
argument is specified, print that string as a label. If iunit is
specified, write output to that unit; otherwise write to standard
output/terminal.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Time to be printed as a calendar date/time.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">str</em></td>
<td>String label to print before date. Default: 'DATE: '.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">iunit</em></td>
<td>Unit number to write output on. Default is standard
output/terminal (unit 6).</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A SUBROUTINE =======================-->
<a name="write_time" id="write_time"></a><br>
<div class="routine"><em class="call">call write_time(file_unit,
time <em class="optionalcode">[, form, ios_out]</em>)</em>
<pre>
integer,          intent(in)               :: <em class=
"code">file_unit</em>
type(time_type),  intent(in)               :: <em class=
"code">time</em>
character(len=*), intent(in),  optional    :: <em class=
"optionalcode">form</em>
integer,          intent(out), optional    :: <em class=
"optionalcode">ios_out</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Write a time to an already open file unit. The optional 'form'
argument controls whether it is formatted or unformatted. On error,
the optional 'ios_out' argument returns the error code; otherwise a
fatal error is triggered.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">file_unit</em></td>
<td>Integer unit number for an already open file.</td>
</tr>
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Time to write to the file.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">form</em></td>
<td>String format specifier; either 'unformatted' or 'formatted'.
Defaults to 'formatted'.</td>
</tr>
<tr>
<td valign="top"><em class="optionalcode">ios_out</em></td>
<td>If specified, on error the i/o status error code is returned
here. Otherwise, the standard error handler is called and the
program exits.</td>
</tr>
</table>
</div>
<br>
<!--============= DESCRIPTION OF A SUBROUTINE =======================-->
 <a name="interactive_time" id="interactive_time"></a><br>
<div class="routine"><em class="call">call
interactive_time(time)</em>
<pre>
type(time_type), intent(inout) :: <em class="code">time</em>
</pre></div>
<!-- FIXME should that not just be intent(out)?  it is not read. -->
<div class="indent1"><!-- Description -->
<p>Prompt the user for a time as a calendar date, based on the
currently selected calendar type. Writes prompt to standard output
and reads from standard input.</p>
<table width="100%" border="0" summary="" cellpadding="3">
<tr>
<td valign="top"><em class="code">time</em></td>
<td>Time type to be returned.</td>
</tr>
</table>
</div>
<br>
<!--=================== DESCRIPTION OF A LOCAL TYPE ==================-->
 <a name="time_type" id="time_type"></a><br>
<div class="type">
<pre>
<em class="call">type time_type</em>
   private
   integer :: seconds
   integer :: days
end type time_type
</pre></div>
<div class="indent1"><!-- Description -->
<p>This type is used to define a time interval.</p>
</div>
<br>
<!--=================== DESCRIPTION OF A PARAMETER ==================-->
 <a name="cal_type" id="cal_type"></a><br>
<div class="type">
<pre>
 integer :: <em class="code">NO_CALENDAR</em>
 integer :: <em class="code">GREGORIAN</em>
 integer :: <em class="code">GREGORIAN_MARS</em>
 integer :: <em class="code">JULIAN</em>
 integer :: <em class="code">THIRTY_DAY_MONTHS</em>
 integer :: <em class="code">NOLEAP</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>The public integer parameters which define different calendar
types. The same names defined as strings can be used to set the
calendar type.</p>
</div>
<br>
<!--=================== DESCRIPTION OF AN OPERATOR ==================-->
 <a name="op_type" id="op_type"></a><br>
<div class="type">
<pre>
 <em class="code">operator(+)</em>
 <em class="code">operator(-)</em>
 <em class="code">operator(*)</em>
 <em class="code">operator(/)</em>
 <em class="code">operator(&gt;)</em>
 <em class="code">operator(&gt;=)</em>
 <em class="code">operator(==)</em>
 <em class="code">operator(/=)</em>
 <em class="code">operator(&lt;)</em>
 <em class="code">operator(&lt;=)</em>
 <em class="code">operator(//)</em>
</pre></div>
<div class="indent1"><!-- Description -->
<p>Arithmetic operations are defined for time types, so expressions
like</p>
<pre>
<em class="code">t3 = t1 + t2</em>
</pre>
<p>can be constructed. To use these operators, they must be listed
on the module use statement in the form specified above.<br>
<br>
Multiplication is one time and one scalar.<br>
<br>
Division with a single slash is integer, and returns the largest
integer for which time1 &gt;= time2 * n. Division with a double
slash returns a double precision quotient of the two times.</p>
</div>
<br>
<!--==================================================================-->
<!--=================== DESCRIPTION OF A NAMELIST  ===================-->
<!--==================================================================-->
 <a name="Namelist" id="Namelist"></a>
<div class="top">[<a href="#">top</a>]</div>
<hr>
<h2>NAMELIST</h2>
<p>No namelist is currently defined for the time manager code.</p>
<!--==================================================================-->
<!-- Describe the Files Used by this module.                          -->
<!--==================================================================-->
<a name="FilesUsed" id="FilesUsed"></a>
<div class="top">[<a href="#">top</a>]</div>
<hr>
<h2>FILES</h2>
<ul>
<li>none</li>
</ul>
<!--==================================================================-->
<!-- Cite references, if need be.                                     -->
<!--==================================================================-->
<a name="References" id="References"></a>
<div class="top">[<a href="#">top</a>]</div>
<hr>
<h2>REFERENCES</h2>
<ol>
<li>none</li>
</ol>
<!--==================================================================-->
<!-- Describe all the error conditions and codes.                     -->
<!--==================================================================-->
<a name="Errors" id="Errors"></a>
<div class="top">[<a href="#">top</a>]</div>
<hr>
<h2>ERROR CODES and CONDITIONS</h2>
<div class="errors">
<table border="1" cellspacing="1" cellpadding="10" width="100%">
<tr>
<th>Routine</th>
<th>Message</th>
<th>Comment</th>
</tr>
<tr><!-- routine -->
<td valign="top"></td>
<!-- message -->
<td valign="top"></td>
<!-- comment -->
<td valign="top"></td>
</tr>
</table>
</div>
<h2>KNOWN BUGS</h2>
<p>none at this time</p>
<!--==================================================================-->
<!-- Describe Future Plans.                                           -->
<!--==================================================================-->
<a name="FuturePlans" id="FuturePlans"></a>
<div class="top">[<a href="#">top</a>]</div>
<hr>
<h2>FUTURE PLANS</h2>
<p>none at this time</p>
<!--==================================================================-->
<!-- PrivateComponents                                                -->
<!--==================================================================-->
<a name="PrivateComponents" id="PrivateComponents"></a>
<div class="top">[<a href="#">top</a>]</div>
<hr>
<h2>PRIVATE COMPONENTS</h2>
<p>N/A</p>
<!--==================================================================-->
<!-- Legalese & Metadata                                              -->
<!--==================================================================-->
<a name="Legalese" id="Legalese"></a>
<div class="top">[<a href="#">top</a>]</div>
<hr>
<h2>Terms of Use</h2>
<p>DART software - Copyright UCAR. This open source software is
provided by UCAR, "as is", without charge, subject to all terms of
use at <a href=
"http://www.image.ucar.edu/DAReS/DART/DART_download">http://www.image.ucar.edu/DAReS/DART/DART_download</a></p>
<!--==================================================================-->
</body>
</html>
