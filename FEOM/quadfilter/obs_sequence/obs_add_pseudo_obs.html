<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
          "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<HEAD>
<TITLE>PROGRAM obs_obs_add_pseudo_obs</TITLE>
<link rel="stylesheet" type="text/css" href="../doc/html/doc.css" />
<link href="../doc/images/dart.ico" rel="shortcut icon" />
</HEAD>
<BODY>
<A NAME="TOP"></A>

<H1>PROGRAM <em class=program>obs_obs_add_pseudo_obs</em></H1>

<table border=0 summary="" cellpadding=5>
<tr>
    <td valign=middle>
    <img src="../doc/images/Dartboard7.png" alt="DART project logo" height=70 />
    </td>
    <td>
       <P>Jump to <a href="../index.html">DART Documentation Main Index</a><br />
          <small><small>version information for this file: <br />
          <!-- version tag follows, do not edit -->
          $Id$</small></small>
       </P></td>
</tr>
</table>

<A HREF="#Namelist">NAMELIST</A> /
<A HREF="#Building">BUILDING</A> /
<A HREF="#FilesUsed">FILES</A> /
<A HREF="#References">REFERENCES</A> /
<A HREF="#Errors">ERRORS</A> /
<A HREF="#FuturePlans">PLANS</A> /
<A HREF="#Legalese">TERMS OF USE</A>

<H2>Overview</H2>

<P>
This specialized tool is intended to be used with 
the Quadratic Squared Error filter option.
See the <a href="../filter/filter.html#QuadFilter">filter documentation</a>
for more details on the usage.
</P>
<P>
Running this tool will add an additional observation of
type <em class=code>QUAD_FILTER_SQUARED_ERROR</em> after every
observation in the input observation sequence file.
It is recommended that running this tool be the last
step before running <em class=program>filter</em>, since using 
some of the other observation sequence tools may separate the 
Pseudo Observations from their corresponding pair.
</P>
<P>
After running <em class=program>filter</em> but before running
the DART observation space diagnostics, 
the standard <a href="obs_sequence_tool.html">obs_sequence_tool</a>
can be used to remove the Pseudo Observations.
A suggested namelist is:
<div class=indent><pre>
&amp;obs_sequence_tool_nml
   filename_seq    = 'obs_seq_with_pseudo_obs.final'
   filename_out    = 'obs_seq.final',
   keep_types      = .false.,
   obs_types       = 'QUAD_FILTER_SQUARED_ERROR'
   gregorian_cal   = .true.
/
</pre></div>
</P>

<!--==================================================================-->
<!--=================== DESCRIPTION OF A NAMELIST ====================-->
<!--==================================================================-->

<A NAME="Namelist"></A>
<div class="top">[<a href="#">top</a>]</div><hr />
<H2>NAMELIST</H2>
<P>
This namelist is read from the file <em class=file>input.nml</em>.
Namelists start with an ampersand
'&amp;' and terminate with a slash '/'.
Character strings that contain a '/' must be
enclosed in quotes to prevent them from 
prematurely terminating the namelist.
</P>

<div class=namelist>
<pre>
&amp;obs_add_pseudo_obs_nml
   filename_in  = 'obs_seq.out',
   filename_out = 'obs_seq_with_pseudo_obs.out',
/
</pre>
</div>

<br />
<br />

<div>
<TABLE border=0 cellpadding=10 width=100% summary='namelist description'>
<THEAD align=left>
<TR><TH> Item </TH>
    <TH> Type </TH>
    <TH> Description </TH> </TR>
</THEAD>

<TBODY valign=top>

<TR><TD>filename_in</TD>
    <TD>character(len=256)</TD>
    <TD>The name of the input observation sequence file.
</TD></TR>

<TR><TD>filename_out</TD>
    <TD>character(len=256)</TD>
    <TD>The name of the output observation sequence file to be created.
If it exists it will be overwritten. It will contain all the observations
in the input file along with a corresponding Pseudo Observation for each
existing observation, doubling the size of the observation sequence file.
The specific type of each new observation will be QUAD_FILTER_SQUARED_ERROR.
</TD></TR>

</TBODY> 
</TABLE>
</div>

<br />
<P>
</P>

<!--==================================================================-->

<A NAME="Building"></A>
<div class="top">[<a href="#">top</a>]</div><hr />
<H2>BUILDING</H2>

<P>
Some <em class=file>$DART/models/*/work</em> directories already include 
files that will build the tool along with other executable programs.  
The <em class=file>input.nml :: &amp;preprocess_nml</em> namelist must
include <em class=file>"../../../obs_def/obs_def_quad_filter_mod.f90"</em> 
along with any other forward operator/observation definition files.
</P>
<P>
If <em class=file>mkmf_obs_add_pseudo_obs</em> or 
<em class=file>path_names_obs_add_pseudo_obs</em> are not
found in the work directory, copy them from the <em class=file>obs_sequence</em> 
directory and adapt the path_names file to match the rest of the files for that model.
</P>
<P>
The <em class=file>preprocess</em> program must be built and run first
to define the supported observation types.  See the 
<a href="../preprocess/preprocess.html">preprocess documentation</a>
for more details on how to define the list and run it.
The combined list of all observation types which will be encountered
over all input files must be in the preprocess input list.
The other important choice when building the tool is to include a
compatible locations module.  For the low-order models,
the <tt>oned</tt> module should be used; for real-world observations,
the <tt>threed_sphere</tt> module should be used.
</P>
<P>Generally the directories where executables are built will include
a <em class=file>quickbuild.csh</em> script which will build and run 
<em class=file>preprocess</em> and then build the rest of the executables.  
</P>

<!--==================================================================-->

<A NAME="OtherModulesUsed"></A>
<div class="top">[<a href="#">top</a>]</div><hr />
<H2>MODULES USED</H2>
<PRE>
types_mod
utilities_mod
time_manager_mod
obs_def_mod
obs_sequence_mod
</PRE>

<!--==================================================================-->
<!-- Describe the Files Used by this module.                          -->
<!--==================================================================-->

<A NAME="FilesUsed"></A>
<div class="top">[<a href="#">top</a>]</div><hr />
<H2>FILES</H2>
<UL><LI><em class=file>input.nml</em></LI>
    <LI>The input file specified by <em class=code>filename_in</em></LI>
    <LI>The output file specified by <em class=code>filename_out</em></LI>
</UL>

<!--==================================================================-->
<!-- Cite references, if need be.                                     -->
<!--==================================================================-->

<A NAME="References"></A>
<div class="top">[<a href="#">top</a>]</div><hr />
<H2>REFERENCES</H2>
<ul>
<li> none </li>
</ul>

<!--==================================================================-->
<!-- Describe all the error conditions and codes.                     -->
<!--==================================================================-->

<A NAME="Errors"></A>
<div class="top">[<a href="#">top</a>]</div><hr />
<H2>ERROR CODES and CONDITIONS</H2>
<div class=errors>
<TABLE border=1 cellspacing=1 cellpadding=10 width=100%>
<TR><TH>Routine</TH><TH>Message</TH><TH>Comment</TH></TR>

<TR><!-- routine --><TD VALIGN=top>obs_obs_add_pseudo_obs</TD>
    <!-- message --><TD VALIGN=top>input file not found.</TD>
    <!-- comment --><TD VALIGN=top>unable to open the given input file</TD>
</TR>

</TABLE>
</div>

<H2>KNOWN BUGS</H2>
<P>
none
</P>

<!--==================================================================-->
<!-- Describe Future Plans.                                           -->
<!--==================================================================-->

<A NAME="FuturePlans"></A>
<div class="top">[<a href="#">top</a>]</div><hr />
<H2>FUTURE PLANS</H2>
<P>
none at this time.
</P>

<!--==================================================================-->
<!-- Legalese & Metadata                                              -->
<!--==================================================================-->

<A NAME="Legalese"></A>
<div class="top">[<a href="#">top</a>]</div><hr />
<H2>Terms of Use</H2>

<P>
DART software - Copyright 2004 - 2013 UCAR.<br>
This open source software is provided by UCAR, "as is",<br>
without charge, subject to all terms of use at<br>
<a href="http://www.image.ucar.edu/DAReS/DART/DART_download">
http://www.image.ucar.edu/DAReS/DART/DART_download</a>
</P>

<TABLE border=0 cellpadding=0 width=100% summary="">
<TR><TD valign=top>Contact:       </TD><TD> DART core group   </TD></TR>
<TR><TD valign=top>Revision:      </TD><TD> $Revision$ </TD></TR>
<TR><TD valign=top>Source:        </TD><TD> $URL$ </TD></TR>
<TR><TD valign=top>Change Date:   </TD><TD> $Date$ </TD></TR>
<TR><TD valign=top>Change&nbsp;history:&nbsp;</TD><TD> try "svn&nbsp;log" or "svn&nbsp;diff" </TD></TR>
</TABLE>

<!--==================================================================-->

</BODY>
</HTML>
